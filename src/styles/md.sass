@use 'variables' as v

html
  p.katex-block
    overflow-x: scroll
    padding: 0 1em
  p img
    width: 100%
  div.shiki-container
    overflow-x: scroll
    width: 100%
    border-radius: 1em
    & span.line:not(:last-child)
      min-height: 1em
    & .shiki-filename
      padding: 1em 1.5em 0 1.5em
      font-size: 0.8em
  pre.shiki
    min-width: fit-content
    padding: 1em 1.5em 1em 1.2em
    margin: 0
    .highlighted
      background: v.$code-highlight-color
      display: block
      margin: 0 -2em 0 -1.7em
      padding: 0 2em 0 1.7em
    code[v-pre]
      display: flex
      flex-direction: column
      font-family: "JetBrains Mono", monospace
      font-weight: normal
      // line number https://github.com/shikijs/shiki/issues/3#issuecomment-830564854
      counter-reset: step
      counter-increment: step calc(var(--start, 1) - 1)
      & .line::before
        content: counter(step)
        counter-increment: step
        width: 1em
        margin-right: 0.5em
        display: inline-block
        text-align: right
        color: rgba(115,138,148,.4)
  mark
    background: linear-gradient(to right, rgba(255, 225, 0, .1), rgba(255, 225, 0, .8) 4%, rgba(255, 225, 0, .3)) 0 0
    margin: 0 -0.4em
    padding: 0 0.4em
    border-radius: .8em .3em
    box-decoration-break: clone
  .table-of-contents
    &>ul
      margin: 0
    margin-bottom: 2em
  .katex-error
    color: v.$katex-error-color

html:not(.dark)
  .shiki-dark
    display: none

html.dark
  .shiki-light
    display: none


